name: Build and Deploy

on:
    push:
        branches:
            - main

jobs:
    build:
        runs-on: ubuntu-latest
        container:
            image: ubuntu:24.04

        steps:
            -   name: Install dependencies
                run: |
                    apt-get update
                    apt-get install -y gcc g++ git bash make cmake gnupg pkg-config software-properties-common
                    apt-add-repository -y ppa:mutlaqja/ppa
                    apt-get install -y libindi1

            -   name: Checkout repository
                uses: actions/checkout@v4

            -   name: Build and test project
                shell: bash
                run: |
                    mkdir -p build
                    cd build

                    cmake  ..
                    make all
